<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>이벤트 — SMG4 마커 라디오</title>
  <meta name="author" content="SMG4 라디오">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="description" content="SMG4 라디오의 공식 이벤트">
  <meta name="keywords" content="SMG4 라디오, 인터넷 라디오, 라디오 듣기, 이벤트, 온라인 음악, 인터넷 라디오 방송, 2025 인기곡, 독점 트랙, SMG4 마커 라디오 방송국, 온라인 댄스 음악, 파티 음악, 무료 음악 듣기, 온라인 음악 라디오">

  <!-- Open Graph -->
  <meta property="og:title" content="SMG4 마커 라디오 — 온라인으로 듣기">
  <meta property="og:description" content="SMG4 라디오의 공식 이벤트">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://smg4radiobetawebv2.pages.dev/SMG4_2023.svg">
  <meta property="og:url" content="https://smg4radiobetawebv2.pages.dev/">
  <meta property="og:site_name" content="SMG4 마커 라디오">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SMG4 마커 라디오 — 온라인으로 듣기">
  <meta name="twitter:description" content="SMG4 라디오의 공식 이벤트">
  <meta name="twitter:image" content="https://smg4radiobetawebv2.pages.dev/SMG4_2023.svg">

  <!-- schema.org -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "RadioStation",
    "name": "SMG4 마커 라디오",
    "url": "https://smg4radiobetawebv2.pages.dev/",
    "genre": "이벤트, 일렉트로닉, 댄스",
    "description": "SMG4 라디오의 공식 이벤트",
    "image": "https://smg4radiobetawebv2.pages.dev/SMG4_2023.svg",
    "sameAs": [
      "https://smg4radiobetawebv2.pages.dev/"
    ]
  }
  </script>

  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="SMG4.png">
  <link rel="icon" type="image/png" sizes="32x32" href="SMG4.png">
  <link rel="icon" type="image/png" sizes="194x194" href="SMG4.png">
  <link rel="icon" type="image/png" sizes="192x192" href="SMG4.png">
  <link rel="icon" type="image/png" sizes="16x16" href="SMG4.png">
  <link rel="mask-icon" href="SMG4.png" color="#181818">
  <link rel="shortcut icon" href="SMG4.png">
  <meta name="msapplication-TileColor" content="#181818">
  <meta name="theme-color" content="#181818">

  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      text-align: center;
    }

    .radio-player {
      background: #222;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      max-width: 500px;
      width: 90%;
    }

    .play-btn {
      background: #1db954;
      border: none;
      color: white;
      padding: 12px 25px;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease;
      margin: 10px 5px;
    }

    .play-btn:hover {
      background: #1ed760;
    }

    .volume-control {
      width: 100%;
      margin-top: 10px;
    }

    .time-info {
      margin-top: 20px;
    }

    .logo {
      max-width: 150px;
      margin-bottom: 20px;
    }

    #recordTimer {
      margin-top: 10px;
      font-weight: bold;
    }

    .lang-selector {
      position: absolute;
      top: 10px;
      right: 10px;
    }
  </style>
</head>

<body>

  <div class="lang-selector">
    <label for="languageSelect">🌐 언어 선택:</label>
    <select id="languageSelect" onchange="changeLanguage(this.value)">
      <option value="ko" selected>한국어</option>
      <option value="en">English</option>
      <option value="ru">Русский</option>
      <option value="pl">Polski</option>
      <option value="jp">日本語</option>
      <option value="de">Deutsch</option>
      <option value="fi">Suomi</option>
      <option value="tr">Türkçe</option>
      <option value="fr">Français</option>
    </select>
  </div>

  <div class="radio-player">
    <img class="logo" src="./SMG4_2023.svg" alt="SMG4 로고">
    <h2>SMG4 마커 라디오</h2>

    <button class="play-btn" onclick="togglePlay()">재생</button>
    <button class="play-btn" id="recordBtn" onclick="toggleRecording()">녹음 시작</button>

    <audio id="radio" src="https://stream.zeno.fm/drhagg7ds1ltv" type="audio/mpeg"></audio>

    <label for="volume">볼륨</label>
    <input type="range" id="volume" class="volume-control" min="0" max="1" step="0.01" value="1">
    <p>볼륨: <span id="volumeValue">100%</span></p>

    <p id="recordTimer" style="display:none;">녹음 시간: 00:00</p>
    <a id="downloadLink" style="display:none;" download="radio_recording.webm">녹음 다운로드</a>

    <div class="time-info">
      <p>현재 시간: <span id="localTime"></span></p>
      <p>UTC 시간: <span id="utcTime"></span></p>
    </div>

    <a href="index.html">뒤로가기</a>
    <a href="https://discord.gg/PeafwRcHKE">디스코드</a>
    <a href="https://smg4archivepages.pages.dev/">SMG4 ARCHIVE PAGES</a>
  </div>

  <a href="https://info.flagcounter.com/Filz">
    <img src="https://s01.flagcounter.com/count2/Filz/bg_FFFFFF/txt_000000/border_CCCCCC/columns_8/maxflags_40/viewers_0/labels_1/pageviews_1/flags_0/percent_0/" alt="국기 카운터" border="0">
  </a>

  <a href="https://www.hamqsl.com/solar.html" title="태양 활동 정보 추가하기!">
    <img src="https://www.hamqsl.com/solar101vhfpic.php" style="max-width: 100%; width: 500px; height: auto;">
  </a>

  <script>
    const radio = document.getElementById('radio');
    const button = document.querySelector('.play-btn');
    const volumeSlider = document.getElementById('volume');
    const volumeValue = document.getElementById('volumeValue');
    const recordBtn = document.getElementById('recordBtn');
    const downloadLink = document.getElementById('downloadLink');
    const recordTimer = document.getElementById('recordTimer');

    let isPlaying = false;
    let mediaRecorder;
    let recordedChunks = [];
    let recordStartTime;
    let recordTimerInterval;

    function togglePlay() {
      if (!isPlaying) {
        radio.play();
        button.textContent = '일시정지';
      } else {
        radio.pause();
        button.textContent = '재생';
      }
      isPlaying = !isPlaying;
    }

    volumeSlider.addEventListener('input', () => {
      radio.volume = volumeSlider.value;
      volumeValue.textContent = Math.round(volumeSlider.value * 100) + '%';
    });

    function updateTime() {
      const now = new Date();
      const localTime = now.toLocaleTimeString();
      const utcTime = now.toUTCString().split(' ')[4];
      document.getElementById('localTime').textContent = localTime;
      document.getElementById('utcTime').textContent = utcTime;
    }

    setInterval(updateTime, 1000);
    updateTime();

    async function toggleRecording() {
      if (mediaRecorder && mediaRecorder.state === 'recording') {
        mediaRecorder.stop();
        recordBtn.textContent = '녹음 시작';
        clearInterval(recordTimerInterval);
        recordTimer.style.display = 'none';
        return;
      }

      try {
        const stream = await captureStreamFromAudio(radio);
        mediaRecorder = new MediaRecorder(stream);
        recordedChunks = [];

        mediaRecorder.ondataavailable = event => {
          if (event.data.size > 0) {
            recordedChunks.push(event.data);
          }
        };

        mediaRecorder.onstop = () => {
          const blob = new Blob(recordedChunks, { type: 'audio/webm' });
          const url = URL.createObjectURL(blob);
          downloadLink.href = url;
          downloadLink.style.display = 'inline-block';
          downloadLink.textContent = '녹음 다운로드';
        };

        mediaRecorder.start();
        recordBtn.textContent = '녹음 중지';
        downloadLink.style.display = 'none';

        recordStartTime = Date.now();
        recordTimer.style.display = 'block';
        updateRecordTimer();
        recordTimerInterval = setInterval(updateRecordTimer, 1000);

      } catch (err) {
        console.error('녹음 오류:', err);
        alert('녹음을 시작할 수 없습니다. 브라우저에서 MediaRecorder를 지원하지 않거나 스트림을 캡처할 수 없습니다.');
      }
    }

    function captureStreamFromAudio(audioElement) {
      if (audioElement.captureStream) {
        return Promise.resolve(audioElement.captureStream());
      } else if (audioElement.mozCaptureStream) {
        return Promise.resolve(audioElement.mozCaptureStream());
      } else {
        return Promise.reject(new Error('브라우저가 오디오 캡처를 지원하지 않습니다.'));
      }
    }

    function updateRecordTimer() {
      const elapsed = Math.floor((Date.now() - recordStartTime) / 1000);
      const minutes = String(Math.floor(elapsed / 60)).padStart(2, '0');
      const seconds = String(elapsed % 60).padStart(2, '0');
      recordTimer.textContent = `녹음 시간: ${minutes}:${seconds}`;
    }

    function changeLanguage(lang) {
      if (lang === 'en') {
        window.location.href = 'smg4markerradio.html';
      } else if (lang === 'ru') {
        window.location.href = './smg4markerradioru.html';
      } else if (lang === 'pl') {
        window.location.href = './smg4markerradiopl.html';
      } else if (lang === 'jp') {
        window.location.href = './smg4markerradiojp.html';
      } else if (lang === 'de') {
        window.location.href = './smg4markerradiode.html';
      } else if (lang === 'fi') {
        window.location.href = './smg4markerradiofi.html';
      } else if (lang === 'kr') {
        window.location.href = './smg4markerradiokr.html';
      } else if (lang === 'tr') {
        window.location.href = './smg4markerradiotr.html';
      } else if (lang === 'fr') {
        window.location.href = './smg4markerradiofr.html';
      }
    }
  </script>

</body>
</html>
